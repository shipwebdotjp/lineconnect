# 設定

サイドメニューの「LINE Connect」→「設定」より、各種設定が行えます。

## チャネル
複数のチャネルに対応しています。どのチャネルから通知するかをLINE通知メタボックスで投稿時に選択できます。  
:::info
ここでいうチャネルは、LINE公式アカウントのMessaging APIチャネルのことを指します。
:::
|項目名|説明|
|----:|----|
|チャネル名|チャネルを区別するための名前|
|チャネルアクセストークン|チャネルアクセストークン（長期）|
|チャネルシークレット|チャネルシークレット|
|デフォルトの送信対象|LINE送信メタボックスでの初期値|
|通知の対象となる人数|選択されているロールや設定で通知対象となる人数|
|連携済みユーザー用リッチメニューID|連携済み友達用のリッチメニュー|
|未連携ユーザー用リッチメニューID|未連携の友達用のリッチメニュー|
|(各ロール名)用リッチメニューID|該当ロールユーザー用のリッチメニュー|

## 連携
ログインページURLや、連携開始・解除のキーワード、開始・解除時のメッセージなどを変更することができます。
### ログインページURL
連携開始メッセージボタンをタップしたときに遷移するページURLです。通常ログインページのURLです。
### 自動連携開始
公式アカウントを友だち追加した際に自動的にアカウント連携開始メッセージを表示するかどうかの設定です。
## 更新通知
### 投稿タイプ
LINE送信メタボックスを表示させる投稿タイプを選択します。Wordpressデフォルトで存在する「投稿」「固定ページ」に加えて、Custom Post Type UIなどで追加したカスタム投稿タイプも選択できます。
### 「更新通知を送信する」チェックボックスのデフォルト値
記事編集画面での「更新通知を送信する」チェックボックスのデフォルト値設定です。選択肢は「チェックあり」「チェックなし」「公開済みの場合はチェックなし」です。  
### 通知メッセージテンプレートのデフォルト値
どのテンプレートを用いて投稿通知を行うかを選択するセレクトボックスのデフォルト値設定です。
### リンクラベル
投稿通知の下部に表示されるリンクの表示文字列です。「もっと読む」「Read more」などURLの代わりに表示されるラベルです。
### コメントがあった時に投稿者へLINE通知を行う
記事にコメントがあった時にその記事の投稿者にLINE通知を行うかどうかの設定です。投稿者のWordPressアカウントがLINE連携されている必要があります。
### コメントリンクラベル
コメント通知の下部に表示されるリンクの表示文字列です。
## 通知スタイル
投稿通知デフォルトテンプレートのスタイルを変更できます。  
### 画像表示スタイル
- 領域全体に表示・・・画像の領域に合わせて縦横比を維持したまま画像が拡大縮小されます。はみ出した画像の周囲は切り捨てられます。
- 画像全体を表示・・・画像全体が表示されるよう縦横比を維持したまま画像が拡大縮小されます。画像の周囲に余白が追加されます。
### 画像領域アクペクト比
画像領域の縦横比を「幅:高さ」の半角数字の形で指定します。例）16:9、4:3、3:2  
高さを幅の3倍を超える設定にはできません。よく使うアイキャッチ画像のアスペクト比に合わせておくことで、余白の切り取りが行われなくなります。
### 背景色
メッセージ全体の背景色です。画像、タイトル、本文、リンク領域を個別に指定することは現在のバージョンではできません。
### タイトル文字色、本文文字色、リンク文字色
それぞれの文字色です。色以外のフォントサイズや書体、太字などは設定できません。
### リンクスタイル
- ボタン・・・リンクがボタンで表示されます。
- 文字リンク・・リンクがテキストリンクで表示されます。
### リンクボタン背景色
リンクスタイルを「ボタン」にした際の、ボタンの背景色です。
### タイトル最大行数、本文最大行数
タイトルや本文の最大行数です。これを超える場合は省略記号(…）が付き省略されます。（Android/iOSのみに有効）
※最大行数以内であっても、500文字を超える部分は省略されて送信されます。
## AI応答
OpenAI APIやOpenAI APIと互換性のあるAPIを利用して、LINE公式アカウントに送信されたメッセージにAIが自動応答するよう設定できます。
### AIによる自動応答
AIによる自動応答を利用するかどうかの設定です。使用する場合は「有効」に設定してください。
### OpenAI APIエンドポイント
APIのエンドポイントURLを指定します。デフォルトではOpenAIのAPIエンドポイントが入力されています。OpenAI APIと互換性のあるAPI(OpenRouterなど)を使用する場合は、こちらにエンドポイントURLを指定してください。
### OpenAI APIキー
AI応答を使用するためのOpenAI(または互換API)のAPIキーを入力してください。Open AIのAPIキーは[こちら](https://platform.openai.com/)から取得できます。
### 使用モデル
AI応答で使用するモデル名を入力します。OpenAIのモデル名は[こちら](https://platform.openai.com/docs/models)から確認できます。
### システムプロンプト
LLMが返答を生成する際に参考にする初期のプロンプトです。モデルに振る舞ってほしい振る舞いや、役割、回答における制限を記入します。  
Twigプレースホルダーを使用できます。
### Function Calling
Function Calling機能を有効にするかを選択します。有効にすると、設定した関数が使えるようになり、サイト独自の情報などを返すことができるようになります。
### 使用するFunction
Function Callingで使用する関数を選択します。選択した関数だけが用いられます。関数のリストはアクションと共通のものが使用されます。
#### 用意してある関数
- 自分のユーザー情報取得
	メッセージを送信したユーザーに関する情報を取得して応答に含める際に用いられます
- 現在日時取得
	現在の日時を応答に含める際に用いられます。
- 記事検索
	サイト内の記事内容を元に応答するための関数です。投稿を検索して情報を取得します。
### 使用する文脈数
LLMが文脈に沿って回答するために、以前の質問と返答を何往復分含めるかの設定です。多ければ文脈をより良く理解しますが、トークン数がかさみます。
### 最大トークン数
LLMが生成するテキストの最大長です。選択した使用モデルの最大トークン数を超えた数値を指定することはできません。
### サンプリング温度
LLMが生成する返答の多様性を制御するパラメータです。低い値を設定すると堅い返答になり、高い値では多様な返答が生成されます。
### 未連携ユーザーが1日に使用できる回数
未連携のユーザーがAI応答を1日に何回まで使用できるかを設定します。-1で制限なしになります。
### 連携済みユーザーが1日に使用できる回数
連携済みのユーザーがAI応答を1日に何回まで使用できるかを設定します。-1で制限なしになります。
### 制限回数を超えた場合のメッセージ
ユーザーがチャットの応答制限回数を超えてチャットを利用した場合に表示されるメッセージです。
## データ
### リッチメニューリストを更新
リッチメニューリストをAPIなどで更新した際に、LINE Connectが保持しているリッチメニューリストのキャッシュを削除して更新を反映させる場合に使用するボタンです。
# オーディエンス
オーディエンスとは、メッセージの送信対象です。様々な条件を組み合わせて、どのユーザーを送信対象とするのかを設定できます。

## オーディエンスの作成
管理メニューの「オーディエンス」から作成できます。

## 条件タイプ
以下の条件で送信対象を絞り込むことができます。

### チャネル (channel)
特定のLINEチャネル（LINE公式アカウント）で絞り込みを行います。

### 連携状態 (link)
ユーザーのLINEアカウントとの連携状態で絞り込みを行います。

- **すべての友だち(ブロードキャスト)**: すべての友だちに送信（他の条件は無視されます）
- **認識済みのすべての友だち(マルチキャスト)**: 認識済みのすべての友だち
- **連携済み**: WordPressアカウントと連携済みのユーザー
- **未連携**: WordPressアカウントと未連携のユーザー

**注意**: すべての友達(ブロードキャスト)を選択した場合、他のすべての条件は無視され、すべての友だちにメッセージが送信されます。

### ロール (role)
WordPressのどのロールに属しているかで絞り込みます。

- **AND**: 指定されたすべてのロールを持つユーザー
- **OR**: 指定されたずれかのロールを持つユーザー
- **NOT**: 指定されたいずれのロールを持たないユーザー

### LINEユーザーID (lineUserId)
LINEユーザーIDで絞り込みを行います。  
複数入力した場合、そのうちいずれかに該当するユーザーが抽出対象となります(OR)。  

### WordPressユーザーID (wpUserId)
WordPressユーザーIDで絞り込みを行います。  
複数入力した場合、そのうちいずれかに該当するユーザーが抽出対象となります(OR)。  

### メールアドレス (email)
メールアドレスで絞り込みを行います。  
複数入力した場合、そのうちいずれかに該当するユーザーが抽出対象となります(OR)。  

### ユーザー名 (userLogin)
ユーザー名で絞り込みを行います。  
複数入力した場合、そのうちいずれかに該当するユーザーが抽出対象となります(OR)。  

### 表示名 (displayName)
表示名で絞り込みを行います。  
複数入力した場合、そのうちいずれかに該当するユーザーが抽出対象となります(OR)。  

### ユーザーメタ (usermeta)
ユーザーメタデータで絞り込みます。
- **メタキー**: ユーザーメタの項目名
- **比較方法**: ユーザーメタを検索する際に使用する演算子
- **値**: 検索対象の値。
#### 比較方法 
以下の比較演算子を使用できます：
- `=`, `!=`, `>`, `>=`, `<`, `<=`
    - `!=`は該当するキーが存在し、かつその値が異なるユーザーが対象となります。該当するキーがない場合は対象となりません。
- 部分一致(LIKE), 部分一致しない(NOT LIKE)
    - 文字列が含まれるか
- いずれかに一致(IN), いずれにも一致しない(NOT IN)
    - 複数の値のいずれかに一致するか
- 間(BETWEEN), 間でない(NOT BETWEEN)
    - 2つの値の間かどうか。(両端の値自身も含まれます)
- 存在する(EXISTS), 存在しない(NOT EXISTS)
    - メタキーが存在するかどうか
- 正規表現(REGEXP), 正規表現に一致しない(NOT REGEXP)
    - 正規表現

**注意**: 複数のユーザーメタ絞り込み条件を追加した場合、いずれかの条件を満たすユーザーが抽出対象となります(OR)。

### プロフィール (profile)
ユーザープロフィールデータで絞り込みます。比較演算子はユーザーメタと同じです。  
**注意**: 複数のプロフィール絞り込み条件を追加した場合、いずれかの条件を満たすユーザーが抽出対象となります(OR)。


### オーディエンス条件グループ (group)
複数の条件をグループ化して、ネストできます。
複雑な条件を設定するときに使用します。

## 条件の組み合わせ
複数の条件を組み合わせる際の挙動を指定します。

- **論理積(AND)**: すべての条件を満たすユーザー(デフォルト)
- **論理和(OR)**: いずれかの条件を満たすユーザー

**例外**: ブロードキャストを選択した場合、チャネル以外のすべての条件は無視されます。
